<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../../public/css/bannerManage.css" rel="stylesheet"/>
    <meta charset="UTF-8"/>
    <title>Title</title>
</head>
<body>
<!--<img src="../../public/img/demo1.jpg"/>-->
<div class="menu">
    <table class="menuTable">
        <tr>
            <td>
                <a href="bannerManage.html" target="manageContext">轮播图管理</a>
            </td>

        </tr>

        <tr>
            <td>
                <a href="/member/manage" target="manageContext">用户管理</a>
            </td>

        </tr>

        <tr class="moreManage">
            <td>
                <a href="bannerManage.html"  target="manageContext">商品管理+</a>
                <div class="navigation">
                    <a>品类管理</a>
                    <a>商品管理</a>
                </div>
            </td>

        </tr>

        <tr>
            <td>
                <a href="bannerManage.html" target="manageContext">订单管理</a>
            </td>

        </tr>

        <tr>
            <td>
                <a href="bannerManage.html" target="manageContext">配送费管理</a>
            </td>

        </tr>

        <tr>
            <td>
                <a href="bannerManage.html" target="manageContext">系统消息</a>
            </td>

        </tr>

        <tr class="moreManage">
            <td>
                <a href="bannerManage.html" target="manageContext">系统管理+</a>
                <div class="navigation">
                    <a>角色管理</a>
                    <a>权限管理</a>
                </div>
            </td>

        </tr>

    </table>
</div>
<div class="topTip">轮播图表</div>
<button id="addBanner">+新增轮播图</button>
<div class="container bannerTable" >
    <div class="row">
        <div class="col-md-12">
            <table class="table table-hover">
                <tr>
                    <th style="background-color: #000027;color: white">序号</th>
                    <th style="background-color: #000027;color: white">轮播图片</th>
                    <th style="background-color: #000027;color: white">排序</th>
                    <th style="background-color: #000027;color: white">新增日期</th>
                    <th style="background-color: #000027;color: white">操作</th>
                </tr>
                    <tr th:each="emp:${pageInfo.list}">
                        <td th:text="${emp.id}"></td>
                        <td th:text="${emp.cover_img}"></td>
                        <td th:text="${emp.sort}"></td>
                        <td th:text="${emp.add_time}"></td>
                        <td>
                            <!--角色只有一个-->
                            <button th:onclick="'checkPermission('+${user.getRole_id()}+')'" class="btn btn-info  btn-sm">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                修改
                            </button>
                            <button th:onclick="'checkPermission('+${user.getRole_id()}+')'" class="btn btn-danger  btn-sm">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                删除
                            </button>
                        </td>
                    </tr>
            </table>
        </div>
    </div>
    <div class="row">
        <div class=".col-md-12 col-md-offset-8">
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li><a href="/banner/manage?pn=1">首页</a></li>

                        <li th:if="${pageInfo.hasPreviousPage}">
                            <a th:href="@{'/banner/manage?pn='+${pageInfo.pageNum-1}}">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>

                            <li th:each="page_num:${pageInfo.pageNum}" th:class="${ pageInfo.pageNum == page_num}?'active':' '">
                                <a href="#" th:text="${page_num}"></a>
                            </li>

                    <!--<c:if test="${pageInfo.pages != pageInfo.pageNum}">-->
                        <li th:if="${pageInfo.hasNextPage}">
                            <a th:href="@{'/banner/manage?pn='+${pageInfo.pageNum+1}}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    <!--</c:if>-->
                    <li><a th:href="@{'/banner/manage?pn='+${pageInfo.pages}}">尾页</a></li>
                </ul>
            </nav>
        </div>
    </div>
</div>
</body>
</html>
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
    function checkPermission(operation) {
        $.ajax({
            url:"/banner/permissionCheck",
            data:{operation:operation},
            type:"GET",
            success:function (data) {
                if (data == false)
                {
                    alert("你无权修改此信息");
                }else {
                    alert("修改成功");
                }
            }
        });
    }
</script>